<head>
  <link
    href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/css/bootstrap.min.css"
    rel="stylesheet"
  />
</head>
<body>
  <% if(error === "invalid input"){ %>

  <div class="alert alert-danger mt-5" role="alert" style="width: 75%">
    Your input headline was invalid!
  </div>

  <%} else { %>

  <div class="container-xl border rounded">
    <div class="col-12 p-4">
      <div name="resultDiv" class="card">
        <div class="card-header text-white bg-primary bg-gradient fw-bold">
          "<%=headline%>"
        </div>
        <div class="card-body bg-secondary bg-opacity-25">
          <p class="card-title fw-bold">BullShit Stats</p>
          <p class="card-text"><%= result %></p>
        </div>
      </div>
    </div>

    <div class="col-12 p-4">
      <div name="resultDiv" class="card">
        <div class="card-header text-white bg-secondary bg-gradient fw-bold">
          "<%=headline%>"
        </div>
        <div class="card-body bg-secondary bg-opacity-25">
          <p class="card-title fw-bold">
            Relevant articles from Google Fact Check
          </p>
          <p class="card-text"><%= googleContent %></p>
          <button
            class="btn btn-secondary mb-2"
            type="button"
            data-bs-toggle="collapse"
            data-bs-target="#collapseExample"
            aria-expanded="false"
            aria-controls="collapseExample"
          >
            Click to see more
          </button>
          <div class="collapse" id="collapseExample">
            <div class="card card-body">
              <% googleResults.forEach((ApiResult) => { %>
              <a
                href="<%=ApiResult.url%>"
                class="list-group-item list-group-item-action link-secondary"
                target="_blank"
                >Headline: <%= ApiResult.title %></a
              >
              <p>Rating: <%= ApiResult.textualRating %></p>
              <% }); %>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="col-12 p-4">
      <div name="resultDiv" class="card">
        <div class="card-header text-white bg-primary bg-gradient fw-bold">
          "<%=headline%>"
        </div>
        <div class="card-body bg-secondary bg-opacity-25">
          <p class="card-title fw-bold">Sentiment Checker</p>
          <p class="card-text"><%=sentimentStatement%></p>

          <% if(sentimentResults < 0){ %>
          <p class="card-text"><%=sentimentResults * -1%>% Negative</p>
          <%} else { %>
          <p class="card-text"><%=sentimentResults%>% Positive</p>
          <% } %> <% if(sentimentResults >= 0){ %>
          <div class="progress">
            <div
              class="progress-bar bg-success"
              role="progressbar"
              aria-valuenow="<%= sentimentResults%>"
              style="width: <%= sentimentResults%>%"
              aria-valuemin="0"
              aria-valuemax="1"
            ></div>
          </div>
          <%} else { %>
          <div class="progress">
            <div
              class="progress-bar bg-danger"
              role="progressbar"
              aria-valuenow="<%= sentimentResults * -1%>"
              style="width: <%= sentimentResults * -1%>%"
              aria-valuemin="0"
              aria-valuemax="1"
            ></div>
          </div>
          <% } %>
        </div>
      </div>
    </div>
  </div>
  <script
    src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-OERcA2EqjJCMA+/3y+gxIOqMEjwtxJY7qPCqsdltbNJuaOe923+mo//f6V8Qbsw3"
    crossorigin="anonymous"
  ></script>
  <% } %>
</body>
